(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{112:function(e,n,t){"use strict";t.r(n);var a,r=t(0),c=t.n(r),i=t(21),o=t.n(i),s=(t(95),t(13)),l=t(28),u=t(35),m=t(37),d=t(18),b=t(78),p=t(7),v=t(41),f=t(3),E=Object({NODE_ENV:"production",PUBLIC_URL:""}).SSL_ENABLED?"s":"",O=Object({NODE_ENV:"production",PUBLIC_URL:""}).API_URL_DOMAIN?"http".concat(E,"://").concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).API_URL_DOMAIN,"/graphql"):"http://localhost:3000/graphql",h=Object({NODE_ENV:"production",PUBLIC_URL:""}).API_URL_DOMAIN?"ws".concat(E,"://").concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).API_URL_DOMAIN,"/graphql"):"ws://localhost:3000/graphql",N=new b.a({uri:h,options:{reconnect:!0}}),g=new v.a({uri:O,credentials:"include"}),j=Object(p.d)((function(e){var n=e.query,t=Object(f.l)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),N,g),w=t(26),I=t(25),U=t(43),L=t.n(U),y=t(60),S=t(39);!function(e){e.LOGIN="LOGIN",e.SIGNUP="SIGNUP"}(a||(a={}));var x=t(36);var _=t(137),P=t(134);function k(e){console.log(e)}function C(e){switch(e){case a.LOGIN:return"Log In";case a.SIGNUP:return"Sign Up";default:return""}}var D=function(e){var n=e.loadUser,t=e.authType,r=c.a.useState(!1),i=Object(w.a)(r,2),o=i[0],s=i[1],l={onCompleted:function(){null===v||void 0===v||v.resetStore(),n(),s(!1)},onError:k},u=Object(I.b)(x.d,l),m=Object(w.a)(u,2),d=m[0],b=m[1],p=b.error,v=b.client,f=Object(I.b)(x.b,l),E=Object(w.a)(f,2),O=E[0],h=E[1].error,N=function(){var e=Object(y.a)(L.a.mark((function e(n,t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next=e.t0===a.LOGIN?3:e.t0===a.SIGNUP?6:9;break;case 3:return e.next=5,O(t);case 5:return e.abrupt("return",e.sent);case 6:return e.next=8,d(t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),g=null!==p&&void 0!==p?p:h;return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{onClick:function(){return s(!0)},className:"button"},C(t)),c.a.createElement(_.a,{onClose:function(){return s(!1)},open:o},c.a.createElement(P.a,null,c.a.createElement(S.d,{initialValues:{name:"",password:""},onSubmit:function(){var e=Object(y.a)(L.a.mark((function e(n,a){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.setSubmitting,e.next=3,N(t,{variables:n});case 3:r(!1);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),validate:function(e){var n=["name","password"],t=Object.entries(e).filter((function(e){var t=Object(w.a)(e,2),a=t[0],r=t[1];return n.some((function(e){return e===a&&""===r}))})).map((function(e){return[Object(w.a)(e,1)[0],"This field is required"]}));return Object.fromEntries(t)}},(function(e){var n=e.isSubmitting;return c.a.createElement(S.c,null,c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Username"),c.a.createElement(S.b,{placeholder:"enter username",className:"input",name:"name",type:"text"}),c.a.createElement(S.a,{className:"has-text-danger",name:"name",component:"div"})),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Password"),c.a.createElement(S.b,{placeholder:"type password",className:"input",name:"password",type:"password"}),c.a.createElement(S.a,{className:"has-text-danger",name:"password",component:"div"})),c.a.createElement("button",{type:"submit",className:"button is-success is-fullwidth",disabled:n},C(t)),g&&c.a.createElement("div",{className:"has-text-centered"},c.a.createElement("p",{className:"help is-danger"},function(e){var n=null===e||void 0===e?void 0:e.message.split(":");return(n.length>1?n[1]:n[0]).trim()}(g))))})))))},$=t(77);var R=function(){var e,n=Object(I.c)(x.a),t=n.data,r=n.loading,i=n.client,o=Object(I.a)(x.a),s=Object(w.a)(o,2),m=s[0],d=s[1].data,b=Object(u.f)(),p=Object(I.b)(x.c,{onCompleted:function(){i.resetStore(),b.push("/")}}),v=Object(w.a)(p,1)[0],f=null!==(e=null===t||void 0===t?void 0:t.currentUser)&&void 0!==e?e:null===d||void 0===d?void 0:d.currentUser,E=Object(I.c)($.c).data;return c.a.createElement("nav",{className:"navbar has-background-light"},c.a.createElement("div",{className:"navbar-menu"},c.a.createElement("div",{className:"navbar-start"},c.a.createElement(l.b,{className:"navbar-item",to:"/"},"Home"),c.a.createElement(l.b,{className:"navbar-item",to:"/search"},"Search"),f&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},c.a.createElement("a",{className:"navbar-link"},"Shopping Lists"),c.a.createElement("div",{className:"navbar-dropdown"},c.a.createElement(l.b,{to:"/shopping-lists/".concat(f.id),className:"navbar-item"},f.name,"\xa0",c.a.createElement("i",null,"(yours)")),(null===E||void 0===E?void 0:E.myConnections)&&E.myConnections.map((function(e){return c.a.createElement(l.b,{key:e.id,to:"/shopping-lists/".concat(e.id),className:"navbar-item"},e.name)})))),c.a.createElement(l.b,{className:"navbar-item",to:"/connections"},"Connections")),c.a.createElement(l.b,{className:"navbar-item",to:"/random"},"Random Recipe")),c.a.createElement("div",{className:"navbar-end"},c.a.createElement("div",{className:"navbar-item"},r&&"...loading"),f&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"navbar-item"},f.name),c.a.createElement("div",{className:"navbar-item"},c.a.createElement("button",{className:"button",onClick:function(){return v()}},"Log Out"))),!r&&!f&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"navbar-item"},c.a.createElement(D,{authType:a.LOGIN,loadUser:m})),c.a.createElement("div",{className:"navbar-item"},c.a.createElement(D,{authType:a.SIGNUP,loadUser:m}))))))},A=t.e(10).then(t.bind(null,185)),G=t.e(6).then(t.bind(null,186)),B=t.e(5).then(t.bind(null,187)),F=t.e(11).then(t.bind(null,188)),q=t.e(9).then(t.bind(null,189)),z=Promise.all([t.e(3),t.e(8)]).then(t.bind(null,195)),M=Promise.all([t.e(4),t.e(7)]).then(t.bind(null,196)),V=Object(r.lazy)((function(){return A})),T=Object(r.lazy)((function(){return G})),J=Object(r.lazy)((function(){return B})),W=Object(r.lazy)((function(){return F})),H=Object(r.lazy)((function(){return q})),K=Object(r.lazy)((function(){return z})),Q=Object(r.lazy)((function(){return M})),X=new m.a({fragmentMatcher:new m.b({})});X.writeData({data:{ingredients:[]}});var Y=new d.c({link:j,cache:X,resolvers:{Mutation:{saveIngredients:function(e,n,t){var a=n.ingredients;t.cache.writeData({data:{ingredients:a}})}}}});var Z=function(){return c.a.createElement(s.a,{client:Y},c.a.createElement(l.a,null,c.a.createElement(R,null),c.a.createElement(r.Suspense,{fallback:c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"container has-text-centered"},"Loading ... "))},c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:"/",component:V}),c.a.createElement(u.a,{exact:!0,path:"/random",component:J}),c.a.createElement(u.a,{exact:!0,path:"/search",component:Q}),c.a.createElement(u.a,{exact:!0,path:"/shopping-lists/:userId",component:H}),c.a.createElement(u.a,{exact:!0,path:"/recipe/:id",component:T}),c.a.createElement(u.a,{exact:!0,path:"/shopping-list/:id",component:K}),c.a.createElement(u.a,{exact:!0,path:"/connections",component:W})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},36:function(e,n,t){"use strict";t.d(n,"d",(function(){return l})),t.d(n,"b",(function(){return u})),t.d(n,"a",(function(){return m})),t.d(n,"c",(function(){return d}));var a=t(24),r=t(20);function c(){var e=Object(a.a)(["\n    mutation LogOut {\n        logOut\n    }\n"]);return c=function(){return e},e}function i(){var e=Object(a.a)(["\n    query CurrentUser {\n        currentUser {\n            id\n            name\n        }\n    }\n"]);return i=function(){return e},e}function o(){var e=Object(a.a)(["\n    mutation LogIn($name: String!, $password: String!) {\n        logIn(password: $password, name: $name) {\n            id\n            name\n        }\n    }\n"]);return o=function(){return e},e}function s(){var e=Object(a.a)(["\n    mutation SignUp($name: String!, $password: String!) {\n        createUser(password: $password, name: $name) {\n            id\n            name\n        }\n    }\n"]);return s=function(){return e},e}var l=Object(r.a)(s()),u=Object(r.a)(o()),m=Object(r.a)(i()),d=Object(r.a)(c())},77:function(e,n,t){"use strict";t.d(n,"b",(function(){return l})),t.d(n,"c",(function(){return u})),t.d(n,"a",(function(){return m})),t.d(n,"d",(function(){return d}));var a=t(24),r=t(20);function c(){var e=Object(a.a)(["\n    mutation RemoveFriend($userId: String!) {\n        removeFriend(userId: $userId)\n    }\n"]);return c=function(){return e},e}function i(){var e=Object(a.a)(["\n    mutation AddFriend($userId: String!) {\n        addFriend(userId: $userId)\n    }\n"]);return i=function(){return e},e}function o(){var e=Object(a.a)(["\n    {\n        myConnections {\n            id\n            name\n        }\n    }\n"]);return o=function(){return e},e}function s(){var e=Object(a.a)(["\n    {\n        users {\n            id\n            name\n            friends {\n                id\n        }\n    }\n    }\n"]);return s=function(){return e},e}var l=Object(r.a)(s()),u=Object(r.a)(o()),m=Object(r.a)(i()),d=Object(r.a)(c())},90:function(e,n,t){e.exports=t(112)}},[[90,1,2]]]);
//# sourceMappingURL=main.2c4ba8ef.chunk.js.map