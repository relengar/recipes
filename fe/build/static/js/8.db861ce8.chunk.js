(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[8],{142:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var a=t(24),i=t(20);function r(){var e=Object(a.a)(["\n    query GetRecipeById($recipeId: Int!) {\n        recipeById(recipeId: $recipeId) {\n            title\n            image\n            analyzedInstructions {\n                steps {\n                    step\n                }\n            }\n            extendedIngredients {\n                id\n                original\n                amount\n                unit\n            }\n        }\n    }\n"]);return r=function(){return e},e}var c=Object(i.a)(r())},143:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var a=t(46);function i(e,n){return[].concat(Object(a.a)(e),Object(a.a)(n.steps))}},159:function(e,n,t){},195:function(e,n,t){"use strict";t.r(n);var a=t(26),i=t(0),r=t.n(i),c=t(25),u=t(24),s=t(20);function l(){var e=Object(u.a)(["\n  subscription ShoppingListIngredients($userId: String!) {\n    shoppingListIngredients(userId: $userId) {\n        id\n        original\n        amountFill\n    }\n  }\n"]);return l=function(){return e},e}function o(){var e=Object(u.a)(["\n    query getList($id: String!) {\n        getShoppingListById(id: $id) {\n            id\n            recipeId\n            recipeTitle\n            ingredients {\n                id\n                original\n                amount\n                amountFill\n                unit\n            }\n        }\n    }\n"]);return o=function(){return e},e}var d=Object(s.a)(o()),m=Object(s.a)(l()),v=t(35),p=t(142),g=t(143),f=t(141),b=t(144),I=t(157);function j(){var e=Object(u.a)(["\n    mutation UpdateIngredients(\n        $ingredients: [IngredientInput!]!\n        $id: String!\n    ) {\n        updateShoppingList(\n            ingredients: $ingredients\n            id: $id\n        ) {\n            ingredients {\n                id\n                original\n                amount\n                amountFill\n                unit\n            }\n        }\n    }\n"]);return j=function(){return e},e}var O=Object(s.a)(j()),E=t(197),h=t(190),N=t(191),y=Object(h.a)((function(e){return Object(N.a)({root:{width:200}})}));var F=function(e){var n=e.amount,t=e.amountFill,a=e.unit,i=e.update,c=y();return r.a.createElement(E.a,{marks:[{value:0,label:"0 ".concat(a)},{value:n,label:"".concat(n," ").concat(a)}],valueLabelDisplay:"auto",className:c.root,min:0,max:n,defaultValue:t,onChangeCommitted:function(e,n){i(n)}})};function S(e){var n=["amount","original","id","amountFill","unit"];return Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(a.a)(e,1)[0];return n.some((function(e){return e===t}))})))}var $=function(e){var n=e.ingredients,t=e.listId,i=e.userId,u=Object(c.b)(O),s=Object(a.a)(u,1)[0],l=Object(I.debounce)(s,300);Object(c.d)(m,{variables:{userId:i},onSubscriptionData:function(e){var t=e.subscriptionData;p(function(e,n){return(null===n||void 0===n?void 0:n.length)?e.map((function(e){var t=n.find((function(n){return n.id===e.id}));return Object(b.a)({},e,{},t,{forceRender:t?(new Date).getTime():0})})):e}(n,t.data.shoppingListIngredients))}});var o=r.a.useState(n),d=Object(a.a)(o,2),v=d[0],p=d[1];return r.a.createElement("ul",null,Array.from(v).map((function(e,n){var a=e.amount,c=e.amountFill,u=e.unit,s=e.original,o=e.forceRender;return r.a.createElement("li",{className:"columns",key:n+(null!==o&&void 0!==o?o:0)},r.a.createElement("div",{className:"column"},s,": ",c),r.a.createElement("div",{className:"column"},r.a.createElement(F,{amount:a,amountFill:c,unit:u,update:function(e){return l(function(e,n,t,a){return{variables:{userId:t,id:a,ingredients:[Object(b.a)({},S(n),{amountFill:e})]}}}(e,v[n],i,t))}})),r.a.createElement("div",{className:"column"},c," ",u))})))},L=(t(159),t(36));n.default=function(){var e=Object(v.g)().id,n=Object(c.a)(p.a),t=Object(a.a)(n,2),i=t[0],u=t[1],s=u.data,l=u.loading,o=Object(c.c)(L.a).data,m=Object(c.c)(d,{variables:{id:e},onCompleted:function(e){var n=e.getShoppingListById.recipeId;return i({variables:{recipeId:n}})}}),b=m.data,I=m.loading,j=null===o||void 0===o?void 0:o.currentUser.id,O=null===b||void 0===b?void 0:b.getShoppingListById,E=null===s||void 0===s?void 0:s.recipeById;return r.a.createElement("section",{className:"section"},I&&r.a.createElement("div",{className:"container has-text-centered"},r.a.createElement(f.a,null)),O&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title has-text-centered"},O.recipeTitle),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column has-text-centered"},r.a.createElement("a",{href:"#recipe-instructions"},"Recipe instructions"))),r.a.createElement("div",{className:"columns is-two-thirds is-centered"},r.a.createElement($,{userId:j,ingredients:O.ingredients,listId:O.id})),r.a.createElement("div",{className:"container"},l&&r.a.createElement("div",{className:"container has-text-centered"},r.a.createElement(f.a,null)),E&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("img",{className:"is-one-quarter",src:E.image,alt:E.title})),r.a.createElement("div",{id:"recipe-instructions",className:"container"},E.analyzedInstructions.reduce(g.a,[]).map((function(e,n){var t=e.step;return r.a.createElement("div",{key:n,className:"instruction box has-text-centered"},t)})))))))}}}]);
//# sourceMappingURL=8.db861ce8.chunk.js.map