{"ast":null,"code":"import _slicedToArray from\"/Users/dude/Documents/stuff/recipes/fe/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useQuery,useMutation}from'@apollo/react-hooks';import{ALL_USERS,ADD_FRIEND,REMOVE_FIREND,MY_FREINDS}from'./friends.query';function notInFriends(user,friends){if(!friends&&!(friends===null||friends===void 0?void 0:friends.myConnections)){return true;}return!friends.myConnections.find(function(_ref){var id=_ref.id;return id===user.id;});}function FriendsList(){var _all$users,_friends$myConnection;var _useQuery=useQuery(ALL_USERS),all=_useQuery.data;var _useQuery2=useQuery(MY_FREINDS),friends=_useQuery2.data,client=_useQuery2.client;var _useMutation=useMutation(ADD_FRIEND,{onCompleted:client.resetStore,onError:function onError(){}}),_useMutation2=_slicedToArray(_useMutation,1),addFreind=_useMutation2[0];var _useMutation3=useMutation(REMOVE_FIREND,{onCompleted:client.resetStore,onError:function onError(){}}),_useMutation4=_slicedToArray(_useMutation3,1),removeFriend=_useMutation4[0];return React.createElement(\"section\",{className:\"section\"},React.createElement(\"h1\",{className:\"title has-text-centered\"},\"Connections\"),React.createElement(\"div\",{className:\"columns is-centered\"},React.createElement(\"div\",{className:\"column has-text-centered is-one-quarter\"},React.createElement(\"h1\",{className:\"has-text-weight-bold subtitle has-text-centered\"},\"Other users\"),all===null||all===void 0?void 0:(_all$users=all.users)===null||_all$users===void 0?void 0:_all$users.filter(function(u){return notInFriends(u,friends);}).map(function(user){return React.createElement(\"div\",{className:\"box\",key:user.id},React.createElement(\"article\",{className:\"media\"},React.createElement(\"div\",{className:\"media-content\"},React.createElement(\"nav\",{className:\"level\"},React.createElement(\"div\",{className:\"level-left\"},React.createElement(\"div\",{className:\"level-item\"},user.name)),React.createElement(\"div\",{className:\"level-right\"},React.createElement(\"div\",{className:\"level-item\"},React.createElement(\"button\",{onClick:function onClick(){return addFreind({variables:{userId:user.id}});},className:\"button is-success\"},React.createElement(\"span\",null,\"Add\"))))))));})),React.createElement(\"div\",{className:\"column has-text-centered is-one-quarter\"},React.createElement(\"h1\",{className:\"has-text-weight-bold subtitle has-text-centered\"},\"Your connections\"),friends===null||friends===void 0?void 0:(_friends$myConnection=friends.myConnections)===null||_friends$myConnection===void 0?void 0:_friends$myConnection.map(function(user){return React.createElement(\"div\",{className:\"box\",key:user.id},React.createElement(\"article\",{className:\"media\"},React.createElement(\"div\",{className:\"media-content\"},React.createElement(\"nav\",{className:\"level\"},React.createElement(\"div\",{className:\"level-left\"},React.createElement(\"div\",{className:\"level-item\"},user.name)),React.createElement(\"div\",{className:\"level-right\"},React.createElement(\"div\",{className:\"level-item\"},React.createElement(\"button\",{onClick:function onClick(){return removeFriend({variables:{userId:user.id}});},className:\"button is-danger\"},React.createElement(\"span\",null,\"Remove\"))))))));}))));}export default FriendsList;","map":{"version":3,"sources":["/Users/dude/Documents/stuff/recipes/fe/src/components/friends/FriendsList.tsx"],"names":["React","useQuery","useMutation","ALL_USERS","ADD_FRIEND","REMOVE_FIREND","MY_FREINDS","notInFriends","user","friends","myConnections","find","id","FriendsList","all","data","client","onCompleted","resetStore","onError","addFreind","removeFriend","users","filter","u","map","name","variables","userId"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { ALL_USERS, ADD_FRIEND, REMOVE_FIREND, MY_FREINDS } from './friends.query';\n\ninterface UserInterface {\n    id: string,\n    name: string,\n    friends: {id: string, name: string}[]\n}\n\nfunction notInFriends(user: UserInterface, friends: any): boolean {\n    if (!friends && ! friends?.myConnections) {\n        return true\n    }\n    return !friends.myConnections.find(({id}: {id: string}) => id === user.id)\n}\n\nfunction FriendsList() {\n    const { data: all } = useQuery<{ users: UserInterface[] }>(ALL_USERS)\n    const { data: friends, client } = useQuery<{ myConnections: UserInterface[] }>(MY_FREINDS);\n    const [ addFreind ] = useMutation(ADD_FRIEND, {\n        onCompleted: client.resetStore,\n        onError: () => {},\n    });\n    const [ removeFriend ] = useMutation(REMOVE_FIREND, {\n        onCompleted: client.resetStore,\n        onError: () => {},\n    });\n\n    return (\n        <section className=\"section\">\n            <h1 className=\"title has-text-centered\">Connections</h1>\n            <div className=\"columns is-centered\">\n                <div className=\"column has-text-centered is-one-quarter\">\n                    <h1 className=\"has-text-weight-bold subtitle has-text-centered\">Other users</h1>\n                    {\n                        all?.users?.filter(u => notInFriends(u, friends)).map((user: any) => \n                            <div className=\"box\" key={user.id}>\n                                <article className=\"media\">\n                                    <div className=\"media-content\">\n                                        <nav className=\"level\">\n                                            <div className=\"level-left\">\n                                                <div className=\"level-item\">{user.name}</div>\n                                            </div>\n                                            <div className=\"level-right\">\n                                                <div className=\"level-item\">\n                                                    <button onClick={() => addFreind({ variables: { userId: user.id } })} className=\"button is-success\">\n                                                    <span>Add</span>\n                                                    </button>\n                                                </div>\n                                            </div>\n                                        </nav>\n                                    </div>\n                                </article>\n                            </div>\n                        )\n                    }\n                </div>\n                <div className=\"column has-text-centered is-one-quarter\">\n                    <h1 className=\"has-text-weight-bold subtitle has-text-centered\">Your connections</h1>\n                    {\n                        friends?.myConnections?.map((user: any) => \n                            <div className=\"box\" key={user.id}>\n                                <article className=\"media\">\n                                    <div className=\"media-content\">\n                                        <nav className=\"level\">\n                                            <div className=\"level-left\">\n                                                <div className=\"level-item\">{user.name}</div>\n                                            </div>\n                                            <div className=\"level-right\">\n                                                <div className=\"level-item\">\n                                                    <button onClick={() => removeFriend({ variables: { userId: user.id } })} className=\"button is-danger\">\n                                                    <span>Remove</span>\n                                                    </button>\n                                                </div>\n                                            </div>\n                                        </nav>\n                                    </div>\n                                </article>\n                            </div>\n                        )\n                    }\n                </div>\n            </div>\n        </section>\n    );\n}\n\nexport default FriendsList;"]},"metadata":{},"sourceType":"module"}