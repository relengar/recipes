{"ast":null,"code":"import { WebSocketLink } from 'apollo-link-ws';\nimport { split } from 'apollo-link';\nimport { HttpLink } from 'apollo-link-http';\nimport { getMainDefinition } from 'apollo-utilities';\nconst wsLink = new WebSocketLink({\n  uri: process.env.API_URL ? `${process.env.API_URL}/graphql`.replace('http', 'ws') : 'ws://localhost:3000/graphql',\n  options: {\n    reconnect: true\n  }\n});\nconst httpLink = new HttpLink({\n  uri: process.env.API_URL ? `${process.env.API_URL}/graphql` : 'http://localhost:3000/graphql',\n  credentials: 'omit'\n});\nexport const link = split(({\n  query\n}) => {\n  const definition = getMainDefinition(query);\n  return definition.kind === 'OperationDefinition' && definition.operation === 'subscription';\n}, wsLink, httpLink);","map":{"version":3,"sources":["/Users/dude/Documents/stuff/recipes/fe/src/websocketSetup.ts"],"names":["WebSocketLink","split","HttpLink","getMainDefinition","wsLink","uri","process","env","API_URL","replace","options","reconnect","httpLink","credentials","link","query","definition","kind","operation"],"mappings":"AAAA,SAASA,aAAT,QAA8B,gBAA9B;AACA,SAASC,KAAT,QAAsB,aAAtB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,iBAAT,QAAkC,kBAAlC;AAEA,MAAMC,MAAM,GAAG,IAAIJ,aAAJ,CAAkB;AAC/BK,EAAAA,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC,OAAZ,GAAuB,GAAEF,OAAO,CAACC,GAAR,CAAYC,OAAQ,UAAvB,CAAiCC,OAAjC,CAAyC,MAAzC,EAAiD,IAAjD,CAAtB,GAA+E,6BADrD;AAE/BC,EAAAA,OAAO,EAAE;AACPC,IAAAA,SAAS,EAAE;AADJ;AAFsB,CAAlB,CAAf;AAOA,MAAMC,QAAQ,GAAG,IAAIV,QAAJ,CAAa;AAC5BG,EAAAA,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC,OAAZ,GAAuB,GAAEF,OAAO,CAACC,GAAR,CAAYC,OAAQ,UAA7C,GAAyD,+BADlC;AAE5BK,EAAAA,WAAW,EAAE;AAFe,CAAb,CAAjB;AAKA,OAAO,MAAMC,IAAI,GAAGb,KAAK,CACrB,CAAC;AAAEc,EAAAA;AAAF,CAAD,KAAe;AACX,QAAMC,UAAU,GAAGb,iBAAiB,CAACY,KAAD,CAApC;AACA,SACEC,UAAU,CAACC,IAAX,KAAoB,qBAApB,IACAD,UAAU,CAACE,SAAX,KAAyB,cAF3B;AAIH,CAPoB,EAQrBd,MARqB,EASrBQ,QATqB,CAAlB","sourcesContent":["import { WebSocketLink } from 'apollo-link-ws';\nimport { split } from 'apollo-link';\nimport { HttpLink } from 'apollo-link-http';\nimport { getMainDefinition } from 'apollo-utilities';\n\nconst wsLink = new WebSocketLink({\n  uri: process.env.API_URL ? `${process.env.API_URL}/graphql`.replace('http', 'ws') : 'ws://localhost:3000/graphql',\n  options: {\n    reconnect: true\n  }\n});\n\nconst httpLink = new HttpLink({\n  uri: process.env.API_URL ? `${process.env.API_URL}/graphql` : 'http://localhost:3000/graphql',\n  credentials: 'omit',\n});\n\nexport const link = split(\n    ({ query }) => {\n        const definition = getMainDefinition(query);\n        return (\n          definition.kind === 'OperationDefinition' &&\n          definition.operation === 'subscription'\n        );\n    },\n    wsLink,\n    httpLink,\n);"]},"metadata":{},"sourceType":"module"}