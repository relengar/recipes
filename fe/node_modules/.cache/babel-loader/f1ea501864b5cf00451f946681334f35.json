{"ast":null,"code":"var _jsxFileName = \"/Users/dude/Documents/stuff/recipes/fe/src/components/shoppingList/view_shopping_list/ViewShoppingList.tsx\";\nimport React from 'react';\nimport { useQuery, useLazyQuery } from '@apollo/react-hooks';\nimport { GET_SHOPPING_LIST } from './view_shopping_list.query';\nimport { useParams } from 'react-router-dom';\nimport { GET_RECIPE } from '../../recipe/recipe_view/recipe_view.query';\nimport { flattenSteps } from '../../util/helpers/flattenSteps';\nimport { CircularProgress } from '@material-ui/core';\nimport MyIngredients from './my_ingredients/MyIngredients';\nimport './ViewShoppingList.css';\nimport { CURRENT_USER } from '../../navbar/authModule/auth_module_query';\n\nfunction ViewShoppingList() {\n  const {\n    id\n  } = useParams();\n  const [getRecipe, {\n    data: recipeData,\n    loading: loadingRecipe\n  }] = useLazyQuery(GET_RECIPE, {\n    onCompleted: data => console.log('recipe', data)\n  });\n  const {\n    data: user\n  } = useQuery(CURRENT_USER);\n  const {\n    data,\n    loading\n  } = useQuery(GET_SHOPPING_LIST, {\n    variables: {\n      id\n    },\n    onCompleted: ({\n      getShoppingListById: {\n        recipeId\n      }\n    }) => {\n      console.log('fire', recipeId);\n      getRecipe({\n        variables: {\n          recipeId\n        }\n      });\n    }\n  });\n  const userId = user === null || user === void 0 ? void 0 : user.currentUser.id;\n  const shoppingList = data === null || data === void 0 ? void 0 : data.getShoppingListById;\n  const recipe = recipeData === null || recipeData === void 0 ? void 0 : recipeData.recipeById;\n  console.log(recipe);\n  return React.createElement(\"section\", {\n    className: \"section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, loading && React.createElement(\"div\", {\n    className: \"container has-text-centered\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, React.createElement(CircularProgress, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  })), shoppingList && React.createElement(React.Fragment, null, React.createElement(\"h1\", {\n    className: \"title has-text-centered\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, shoppingList.recipeTitle), React.createElement(\"div\", {\n    className: \"columns is-two-thirds is-centered\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(MyIngredients, {\n    userId: userId,\n    ingredients: shoppingList.ingredients,\n    listId: shoppingList.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, loadingRecipe && React.createElement(\"div\", {\n    className: \"container has-text-centered\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(CircularProgress, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  })), recipe && React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"columns is-centered\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"IMG\", React.createElement(\"img\", {\n    className: \"is-one-quarter\",\n    src: recipe.image,\n    alt: recipe.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, recipe.analyzedInstructions.reduce(flattenSteps, []).map(({\n    step\n  }, i) => React.createElement(\"div\", {\n    key: i,\n    className: \"instruction box has-text-centered\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, step)))))));\n}\n\nexport default ViewShoppingList;","map":{"version":3,"sources":["/Users/dude/Documents/stuff/recipes/fe/src/components/shoppingList/view_shopping_list/ViewShoppingList.tsx"],"names":["React","useQuery","useLazyQuery","GET_SHOPPING_LIST","useParams","GET_RECIPE","flattenSteps","CircularProgress","MyIngredients","CURRENT_USER","ViewShoppingList","id","getRecipe","data","recipeData","loading","loadingRecipe","onCompleted","console","log","user","variables","getShoppingListById","recipeId","userId","currentUser","shoppingList","recipe","recipeById","recipeTitle","ingredients","image","title","analyzedInstructions","reduce","map","step","i"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useQuery, useLazyQuery } from '@apollo/react-hooks';\nimport { GET_SHOPPING_LIST } from './view_shopping_list.query';\nimport { useParams } from 'react-router-dom';\nimport { GET_RECIPE } from '../../recipe/recipe_view/recipe_view.query';\nimport { flattenSteps } from '../../util/helpers/flattenSteps';\nimport { CircularProgress } from '@material-ui/core';\nimport MyIngredients from './my_ingredients/MyIngredients';\nimport './ViewShoppingList.css'\nimport { CURRENT_USER } from '../../navbar/authModule/auth_module_query';\n\nfunction ViewShoppingList() {\n    const { id } = useParams();\n    const [ getRecipe, { data: recipeData, loading: loadingRecipe } ] = useLazyQuery(GET_RECIPE, {\n        onCompleted: data => console.log('recipe', data)\n    })\n    const { data: user } = useQuery(CURRENT_USER);\n    const { data, loading } = useQuery(GET_SHOPPING_LIST, {\n        variables: { id },\n        onCompleted: ({getShoppingListById: { recipeId }}) => {\n            console.log('fire', recipeId)\n            getRecipe({variables: { recipeId }});\n        }\n    });\n    const userId = user?.currentUser.id\n\n    const shoppingList = data?.getShoppingListById;\n    const recipe = recipeData?.recipeById;\n    console.log(recipe);\n\n    return (\n        <section className=\"section\">\n            {loading && <div className=\"container has-text-centered\"><CircularProgress /></div>}\n            {\n                shoppingList &&\n                <>\n                    <h1 className=\"title has-text-centered\">{shoppingList.recipeTitle}</h1>\n                    <div className=\"columns is-two-thirds is-centered\">\n                        <MyIngredients\n                            userId={userId}\n                            ingredients={shoppingList.ingredients}\n                            listId={shoppingList.id}\n                        />\n                    </div>\n                    <div className=\"container\">\n                        {loadingRecipe && <div className=\"container has-text-centered\"><CircularProgress /></div>}\n                        {\n                            recipe &&\n                            <>\n                                <div className=\"columns is-centered\">\n                                    IMG\n                                    <img className=\"is-one-quarter\" src={recipe.image} alt={recipe.title}/>\n                                </div>\n                                <div className=\"container\">\n                                    {\n                                        recipe.analyzedInstructions\n                                            .reduce(flattenSteps, [])\n                                            .map(({step}: {step: string}, i: number) => (\n                                            <div key={i} className=\"instruction box has-text-centered\">{step}</div>\n                                        ))\n                                    }\n                                </div>\n                            </>\n                        }\n                    </div>\n                </>\n            }\n        </section>\n    );\n}\n\nexport default ViewShoppingList;"]},"metadata":{},"sourceType":"module"}