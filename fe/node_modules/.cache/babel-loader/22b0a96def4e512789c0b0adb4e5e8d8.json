{"ast":null,"code":"import _slicedToArray from\"/Users/dude/Documents/stuff/recipes/fe/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useQuery,useLazyQuery}from'@apollo/react-hooks';import{GET_SHOPPING_LIST}from'./view_shopping_list.query';import{useParams}from'react-router-dom';import{GET_RECIPE}from'../../recipe/recipe_view/recipe_view.query';import{flattenSteps}from'../../util/helpers/flattenSteps';import{CircularProgress}from'@material-ui/core';import MyIngredients from'./my_ingredients/MyIngredients';import'./ViewShoppingList.css';import{CURRENT_USER}from'../../navbar/authModule/auth_module_query';function ViewShoppingList(){var _useParams=useParams(),id=_useParams.id;var _useLazyQuery=useLazyQuery(GET_RECIPE),_useLazyQuery2=_slicedToArray(_useLazyQuery,2),getRecipe=_useLazyQuery2[0],_useLazyQuery2$=_useLazyQuery2[1],recipeData=_useLazyQuery2$.data,loadingRecipe=_useLazyQuery2$.loading;var _useQuery=useQuery(CURRENT_USER),user=_useQuery.data;var _useQuery2=useQuery(GET_SHOPPING_LIST,{variables:{id:id},onCompleted:function onCompleted(_ref){var recipeId=_ref.getShoppingListById.recipeId;return getRecipe({variables:{recipeId:recipeId}});}}),data=_useQuery2.data,loading=_useQuery2.loading;var userId=user===null||user===void 0?void 0:user.currentUser.id;var shoppingList=data===null||data===void 0?void 0:data.getShoppingListById;var recipe=recipeData===null||recipeData===void 0?void 0:recipeData.recipeById;return React.createElement(\"section\",{className:\"section\"},loading&&React.createElement(\"div\",{className:\"container has-text-centered\"},React.createElement(CircularProgress,null)),shoppingList&&React.createElement(React.Fragment,null,React.createElement(\"h1\",{className:\"title has-text-centered\"},shoppingList.recipeTitle),React.createElement(\"div\",{className:\"columns\"},React.createElement(\"div\",{className:\"column has-text-centered\"},React.createElement(\"a\",{href:\"#recipe-instructions\"},\"Recipe instructions\"))),React.createElement(\"div\",{className:\"columns is-two-thirds is-centered\"},React.createElement(MyIngredients,{userId:userId,ingredients:shoppingList.ingredients,listId:shoppingList.id})),React.createElement(\"div\",{className:\"container\"},loadingRecipe&&React.createElement(\"div\",{className:\"container has-text-centered\"},React.createElement(CircularProgress,null)),recipe&&React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"columns is-centered\"},React.createElement(\"img\",{className:\"is-one-quarter\",src:recipe.image,alt:recipe.title})),React.createElement(\"div\",{id:\"recipe-instructions\",className:\"container\"},recipe.analyzedInstructions.reduce(flattenSteps,[]).map(function(_ref2,i){var step=_ref2.step;return React.createElement(\"div\",{key:i,className:\"instruction box has-text-centered\"},step);}))))));}export default ViewShoppingList;","map":{"version":3,"sources":["/Users/dude/Documents/stuff/recipes/fe/src/components/shoppingList/view_shopping_list/ViewShoppingList.tsx"],"names":["React","useQuery","useLazyQuery","GET_SHOPPING_LIST","useParams","GET_RECIPE","flattenSteps","CircularProgress","MyIngredients","CURRENT_USER","ViewShoppingList","id","getRecipe","recipeData","data","loadingRecipe","loading","user","variables","onCompleted","recipeId","getShoppingListById","userId","currentUser","shoppingList","recipe","recipeById","recipeTitle","ingredients","image","title","analyzedInstructions","reduce","map","i","step"],"mappings":"yHAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAmBC,YAAnB,KAAuC,qBAAvC,CACA,OAASC,iBAAT,KAAkC,4BAAlC,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,UAAT,KAA2B,4CAA3B,CACA,OAASC,YAAT,KAA6B,iCAA7B,CACA,OAASC,gBAAT,KAAiC,mBAAjC,CACA,MAAOC,CAAAA,aAAP,KAA0B,gCAA1B,CACA,MAAO,wBAAP,CACA,OAASC,YAAT,KAA6B,2CAA7B,CAEA,QAASC,CAAAA,gBAAT,EAA4B,gBACTN,SAAS,EADA,CAChBO,EADgB,YAChBA,EADgB,mBAE4CT,YAAY,CAACG,UAAD,CAFxD,gDAEhBO,SAFgB,qDAEGC,UAFH,iBAEHC,IAFG,CAEwBC,aAFxB,iBAEeC,OAFf,eAGDf,QAAQ,CAACQ,YAAD,CAHP,CAGVQ,IAHU,WAGhBH,IAHgB,gBAIEb,QAAQ,CAACE,iBAAD,CAAoB,CAClDe,SAAS,CAAE,CAAEP,EAAE,CAAFA,EAAF,CADuC,CAElDQ,WAAW,CAAE,8BAAyBC,CAAAA,QAAzB,MAAEC,mBAAF,CAAyBD,QAAzB,OAAyCR,CAAAA,SAAS,CAAC,CAACM,SAAS,CAAE,CAAEE,QAAQ,CAARA,QAAF,CAAZ,CAAD,CAAlD,EAFqC,CAApB,CAJV,CAIhBN,IAJgB,YAIhBA,IAJgB,CAIVE,OAJU,YAIVA,OAJU,CAQxB,GAAMM,CAAAA,MAAM,CAAGL,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAEM,WAAN,CAAkBZ,EAAjC,CAEA,GAAMa,CAAAA,YAAY,CAAGV,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAEO,mBAA3B,CACA,GAAMI,CAAAA,MAAM,CAAGZ,UAAH,SAAGA,UAAH,iBAAGA,UAAU,CAAEa,UAA3B,CAEA,MACI,gCAAS,SAAS,CAAC,SAAnB,EACKV,OAAO,EAAI,2BAAK,SAAS,CAAC,6BAAf,EAA6C,oBAAC,gBAAD,MAA7C,CADhB,CAGQQ,YAAY,EACZ,wCACI,0BAAI,SAAS,CAAC,yBAAd,EAAyCA,YAAY,CAACG,WAAtD,CADJ,CAEI,2BAAK,SAAS,CAAC,SAAf,EACI,2BAAK,SAAS,CAAC,0BAAf,EAA0C,yBAAG,IAAI,CAAC,sBAAR,wBAA1C,CADJ,CAFJ,CAKI,2BAAK,SAAS,CAAC,mCAAf,EACI,oBAAC,aAAD,EACI,MAAM,CAAEL,MADZ,CAEI,WAAW,CAAEE,YAAY,CAACI,WAF9B,CAGI,MAAM,CAAEJ,YAAY,CAACb,EAHzB,EADJ,CALJ,CAYI,2BAAK,SAAS,CAAC,WAAf,EACKI,aAAa,EAAI,2BAAK,SAAS,CAAC,6BAAf,EAA6C,oBAAC,gBAAD,MAA7C,CADtB,CAGQU,MAAM,EACN,wCACI,2BAAK,SAAS,CAAC,qBAAf,EACI,2BAAK,SAAS,CAAC,gBAAf,CAAgC,GAAG,CAAEA,MAAM,CAACI,KAA5C,CAAmD,GAAG,CAAEJ,MAAM,CAACK,KAA/D,EADJ,CADJ,CAII,2BAAK,EAAE,CAAC,qBAAR,CAA8B,SAAS,CAAC,WAAxC,EAEQL,MAAM,CAACM,oBAAP,CACKC,MADL,CACY1B,YADZ,CAC0B,EAD1B,EAEK2B,GAFL,CAES,eAAyBC,CAAzB,KAAEC,CAAAA,IAAF,OAAEA,IAAF,OACL,4BAAK,GAAG,CAAED,CAAV,CAAa,SAAS,CAAC,mCAAvB,EAA4DC,IAA5D,CADK,EAFT,CAFR,CAJJ,CAJR,CAZJ,CAJR,CADJ,CAyCH,CAED,cAAezB,CAAAA,gBAAf","sourcesContent":["import React from 'react';\nimport { useQuery, useLazyQuery } from '@apollo/react-hooks';\nimport { GET_SHOPPING_LIST } from './view_shopping_list.query';\nimport { useParams } from 'react-router-dom';\nimport { GET_RECIPE } from '../../recipe/recipe_view/recipe_view.query';\nimport { flattenSteps } from '../../util/helpers/flattenSteps';\nimport { CircularProgress } from '@material-ui/core';\nimport MyIngredients from './my_ingredients/MyIngredients';\nimport './ViewShoppingList.css'\nimport { CURRENT_USER } from '../../navbar/authModule/auth_module_query';\n\nfunction ViewShoppingList() {\n    const { id } = useParams();\n    const [ getRecipe, { data: recipeData, loading: loadingRecipe } ] = useLazyQuery(GET_RECIPE)\n    const { data: user } = useQuery(CURRENT_USER);\n    const { data, loading } = useQuery(GET_SHOPPING_LIST, {\n        variables: { id },\n        onCompleted: ({getShoppingListById: { recipeId }}) => getRecipe({variables: { recipeId }})\n    });\n    const userId = user?.currentUser.id\n\n    const shoppingList = data?.getShoppingListById;\n    const recipe = recipeData?.recipeById;\n\n    return (\n        <section className=\"section\">\n            {loading && <div className=\"container has-text-centered\"><CircularProgress /></div>}\n            {\n                shoppingList &&\n                <>\n                    <h1 className=\"title has-text-centered\">{shoppingList.recipeTitle}</h1>\n                    <div className=\"columns\">\n                        <div className=\"column has-text-centered\"><a href=\"#recipe-instructions\">Recipe instructions</a></div>\n                    </div>\n                    <div className=\"columns is-two-thirds is-centered\">\n                        <MyIngredients\n                            userId={userId}\n                            ingredients={shoppingList.ingredients}\n                            listId={shoppingList.id}\n                        />\n                    </div>\n                    <div className=\"container\">\n                        {loadingRecipe && <div className=\"container has-text-centered\"><CircularProgress /></div>}\n                        {\n                            recipe &&\n                            <>\n                                <div className=\"columns is-centered\">\n                                    <img className=\"is-one-quarter\" src={recipe.image} alt={recipe.title}/>\n                                </div>\n                                <div id=\"recipe-instructions\" className=\"container\">\n                                    {\n                                        recipe.analyzedInstructions\n                                            .reduce(flattenSteps, [])\n                                            .map(({step}: {step: string}, i: number) => (\n                                            <div key={i} className=\"instruction box has-text-centered\">{step}</div>\n                                        ))\n                                    }\n                                </div>\n                            </>\n                        }\n                    </div>\n                </>\n            }\n        </section>\n    );\n}\n\nexport default ViewShoppingList;"]},"metadata":{},"sourceType":"module"}