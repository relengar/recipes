{"ast":null,"code":"var _jsxFileName = \"/Users/dude/Documents/stuff/recipes/fe/src/components/shoppingList/view_shopping_list/my_ingredients/MyIngredients.tsx\";\nimport React from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { UPDATE_INGREDIENTS } from './my_ingredients.query';\nimport IngredientSlider from './ingredientSlider/IngredientSlider';\n\nfunction processIngredient(ingredient) {\n  const requiredFields = ['amount', 'original', 'id', 'amountFill', 'unit'];\n  return Object.fromEntries(Object.entries(ingredient).filter(([key]) => requiredFields.some(field => field === key)));\n}\n\nfunction getVariables(amountFill, ingredient, userId, listId) {\n  return {\n    variables: {\n      userId,\n      id: listId,\n      ingredients: [{ ...processIngredient(ingredient),\n        amountFill\n      }]\n    }\n  };\n}\n\nfunction MyIngredients({\n  ingredients,\n  listId,\n  userId\n}) {\n  const [updateIngredients] = useMutation(UPDATE_INGREDIENTS);\n  const [cachedIngredients, setIngredients] = React.useState(ingredients);\n  console.log(cachedIngredients, ingredients); // const update = debounce(updateIngredients, 300);\n\n  return React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, Array.from(ingredients).filter((v, i) => i < 1).map(({\n    id,\n    amount,\n    amountFill,\n    unit,\n    original\n  }, i) => React.createElement(\"li\", {\n    className: \"columns\",\n    key: i + new Date().getTime(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, original), React.createElement(\"div\", {\n    className: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(IngredientSlider, {\n    amount: amount,\n    amountFill: amountFill,\n    unit: unit,\n    update: v => {\n      const newIngredients = cachedIngredients;\n      newIngredients[i] = { ...cachedIngredients[i],\n        amountFill: v\n      };\n      setIngredients(newIngredients);\n      updateIngredients(getVariables(v, cachedIngredients[i], userId, listId));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, amountFill, \" \", unit))));\n}\n\nexport default MyIngredients;","map":{"version":3,"sources":["/Users/dude/Documents/stuff/recipes/fe/src/components/shoppingList/view_shopping_list/my_ingredients/MyIngredients.tsx"],"names":["React","useMutation","UPDATE_INGREDIENTS","IngredientSlider","processIngredient","ingredient","requiredFields","Object","fromEntries","entries","filter","key","some","field","getVariables","amountFill","userId","listId","variables","id","ingredients","MyIngredients","updateIngredients","cachedIngredients","setIngredients","useState","console","log","Array","from","v","i","map","amount","unit","original","Date","getTime","newIngredients"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { debounce } from 'lodash'\nimport { useMutation } from '@apollo/react-hooks';\nimport { UPDATE_INGREDIENTS } from './my_ingredients.query';\nimport IngredientSlider from './ingredientSlider/IngredientSlider';\n\ninterface MyIngredientsProps {\n    ingredients: any[];\n    listId: string;\n    userId: string;\n}\n\nfunction processIngredient(ingredient: any) {\n    const requiredFields = ['amount', 'original', 'id', 'amountFill', 'unit'];\n    return Object.fromEntries(\n        Object.entries(ingredient)\n            .filter(([key]) => requiredFields.some(field => field === key))\n    );\n}\n\nfunction getVariables(amountFill: number, ingredient: any, userId: string, listId: string) {\n    return {\n        variables: {\n            userId,\n            id: listId,\n            ingredients: [{...processIngredient(ingredient), amountFill}],\n        }\n    }\n}\n\nfunction MyIngredients({ ingredients, listId, userId }: MyIngredientsProps) {\n    const [ updateIngredients ] = useMutation(UPDATE_INGREDIENTS);\n    const [ cachedIngredients, setIngredients ] = React.useState(ingredients)\n    console.log(cachedIngredients, ingredients)\n    // const update = debounce(updateIngredients, 300);\n\n\n    return (\n        <ul>\n            {Array.from(ingredients).filter((v, i) => i < 1).map(({ id, amount, amountFill, unit, original}: any, i: number) => (\n                <li className=\"columns\" key={i + new Date().getTime()}>\n                    <div className=\"column\">{original}</div>\n                    <div className=\"column\">\n                        <IngredientSlider\n                            amount={amount}\n                            amountFill={amountFill}\n                            unit={unit}\n                            update={v => {\n                                const newIngredients = cachedIngredients;\n                                newIngredients[i] = {...cachedIngredients[i], amountFill: v };\n                                setIngredients(newIngredients);\n                                updateIngredients(getVariables(v as number, cachedIngredients[i], userId, listId))\n                            }}\n                        />\n                    </div>\n                    <div className=\"column\">{amountFill} {unit}</div>\n                </li>\n            ))}\n        </ul>\n    );\n}\n\nexport default MyIngredients;"]},"metadata":{},"sourceType":"module"}