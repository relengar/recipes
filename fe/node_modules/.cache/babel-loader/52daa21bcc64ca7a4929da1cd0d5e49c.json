{"ast":null,"code":"var _jsxFileName = \"/Users/dude/Documents/stuff/recipes/fe/src/components/shoppingList/create_shopping_list/CreateShoppingList.tsx\";\nimport React from 'react';\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport { GET_MY_SHOPPING_LISTS } from '../my_shopping_lists/my-shopping-list.queries';\nimport { CREATE_SHOPPING_LIST } from './create_shopping_list.query';\nimport { CURRENT_USER } from '../../navbar/authModule/auth_module_query';\n\nfunction processInput(object) {\n  return Object.fromEntries(Object.entries(object).filter(([key]) => key !== '__typename'));\n}\n\nfunction CreateShoppingList({\n  recipeId,\n  recipeTitle,\n  ingredients,\n  submitted\n}) {\n  const {\n    data: user\n  } = useQuery(CURRENT_USER);\n  const [createList] = useMutation(CREATE_SHOPPING_LIST, {\n    refetchQueries: [{\n      query: GET_MY_SHOPPING_LISTS,\n      variables: {\n        userId: user.id\n      }\n    }]\n  });\n  return user && React.createElement(\"button\", {\n    onClick: async () => {\n      return await createList({\n        variables: {\n          recipeTitle,\n          recipeId: parseInt(recipeId, 10),\n          ingredients: ingredients.map(processInput),\n          userId: user.id\n        }\n      }).then(id => submitted(id)).catch(err => console.log(err));\n    },\n    className: \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, \"Create shopping list \", JSON.stringify(user));\n}\n\nexport default CreateShoppingList;","map":{"version":3,"sources":["/Users/dude/Documents/stuff/recipes/fe/src/components/shoppingList/create_shopping_list/CreateShoppingList.tsx"],"names":["React","useMutation","useQuery","GET_MY_SHOPPING_LISTS","CREATE_SHOPPING_LIST","CURRENT_USER","processInput","object","Object","fromEntries","entries","filter","key","CreateShoppingList","recipeId","recipeTitle","ingredients","submitted","data","user","createList","refetchQueries","query","variables","userId","id","parseInt","map","then","catch","err","console","log","JSON","stringify"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,qBAAtC;AACA,SAASC,qBAAT,QAAsC,+CAAtC;AACA,SAASC,oBAAT,QAAqC,8BAArC;AACA,SAASC,YAAT,QAA6B,2CAA7B;;AAkBA,SAASC,YAAT,CAAyBC,MAAzB,EAAgD;AAC5C,SAAOC,MAAM,CAACC,WAAP,CAAmBD,MAAM,CAACE,OAAP,CAAeH,MAAf,EAAuBI,MAAvB,CAA8B,CAAC,CAACC,GAAD,CAAD,KAAWA,GAAG,KAAK,YAAjD,CAAnB,CAAP;AACH;;AAED,SAASC,kBAAT,CAA4B;AAAEC,EAAAA,QAAF;AAAYC,EAAAA,WAAZ;AAAyBC,EAAAA,WAAzB;AAAsCC,EAAAA;AAAtC,CAA5B,EAAqG;AACjG,QAAM;AAAEC,IAAAA,IAAI,EAAEC;AAAR,MAAiBjB,QAAQ,CAACG,YAAD,CAA/B;AACA,QAAM,CAAEe,UAAF,IAAiBnB,WAAW,CAACG,oBAAD,EAAuB;AACrDiB,IAAAA,cAAc,EAAE,CAAC;AACbC,MAAAA,KAAK,EAAEnB,qBADM;AAEboB,MAAAA,SAAS,EAAE;AAAEC,QAAAA,MAAM,EAAEL,IAAI,CAACM;AAAf;AAFE,KAAD;AADqC,GAAvB,CAAlC;AAOA,SAAON,IAAI,IACP;AACQ,IAAA,OAAO,EAAE,YAAW;AAChB,aAAO,MAAMC,UAAU,CAAC;AAACG,QAAAA,SAAS,EAAE;AAAER,UAAAA,WAAF;AAAeD,UAAAA,QAAQ,EAAEY,QAAQ,CAACZ,QAAD,EAAW,EAAX,CAAjC;AAAiDE,UAAAA,WAAW,EAAEA,WAAW,CAACW,GAAZ,CAAgBrB,YAAhB,CAA9D;AAA6FkB,UAAAA,MAAM,EAAEL,IAAI,CAACM;AAA1G;AAAZ,OAAD,CAAV,CACRG,IADQ,CACFH,EAAD,IAAQR,SAAS,CAACQ,EAAD,CADd,EAERI,KAFQ,CAEFC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAFL,CAAb;AAGH,KALT;AAMQ,IAAA,SAAS,EAAC,QANlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAQ0BG,IAAI,CAACC,SAAL,CAAef,IAAf,CAR1B,CADJ;AAYH;;AAED,eAAeN,kBAAf","sourcesContent":["import React from 'react';\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport { GET_MY_SHOPPING_LISTS } from '../my_shopping_lists/my-shopping-list.queries';\nimport { CREATE_SHOPPING_LIST } from './create_shopping_list.query';\nimport { CURRENT_USER } from '../../navbar/authModule/auth_module_query';\n\ninterface NewShoppingListProps {\n    recipeId: string;\n    recipeTitle: string;\n    ingredients: ShoppingListIngredient[];\n    submitted: Function;\n}\n\ninterface ShoppingListIngredient {\n    id: number;\n    name: string;\n    original: string;\n    originalName: string;\n    amount: number;\n    unit: string;\n}\n\nfunction processInput<T>(object: T): Partial<T> {\n    return Object.fromEntries(Object.entries(object).filter(([key]) => key !== '__typename'));\n}\n\nfunction CreateShoppingList({ recipeId, recipeTitle, ingredients, submitted }: NewShoppingListProps) {\n    const { data: user } = useQuery(CURRENT_USER);\n    const [ createList ] = useMutation(CREATE_SHOPPING_LIST, {\n        refetchQueries: [{\n            query: GET_MY_SHOPPING_LISTS,\n            variables: { userId: user.id },\n        }]\n    });\n\n    return user && (\n        <button\n                onClick={async() => {\n                    return await createList({variables: { recipeTitle, recipeId: parseInt(recipeId, 10), ingredients: ingredients.map(processInput), userId: user.id }})\n                        .then((id) => submitted(id))\n                        .catch(err => console.log(err))\n                }}\n                className=\"button\"\n            >\n            Create shopping list {JSON.stringify(user)}\n        </button>\n    )\n}\n\nexport default CreateShoppingList"]},"metadata":{},"sourceType":"module"}