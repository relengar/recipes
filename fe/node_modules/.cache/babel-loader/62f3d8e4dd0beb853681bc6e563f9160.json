{"ast":null,"code":"import _slicedToArray from \"/Users/dude/Documents/stuff/recipes/fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/dude/Documents/stuff/recipes/fe/src/components/shoppingList/create_shopping_list/CreateShoppingList.tsx\";\nimport React from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { GET_MY_SHOPPING_LISTS } from '../my_shopping_lists/my-shopping-list.queries';\nimport { CREATE_SHOPPING_LIST } from './create_shopping_list.query';\n\nfunction processInput(object) {\n  return Object.fromEntries(Object.entries(object).filter(([key]) => key !== '__typename'));\n}\n\nfunction CreateShoppingList({\n  userId,\n  recipeId,\n  recipeTitle,\n  ingredients,\n  submitted\n}) {\n  const _useMutation = useMutation(CREATE_SHOPPING_LIST, {\n    refetchQueries: [{\n      query: GET_MY_SHOPPING_LISTS,\n      variables: {\n        userId: '5e03a6a91841d1fce86f9292'\n      }\n    }]\n  }),\n        _useMutation2 = _slicedToArray(_useMutation, 1),\n        createList = _useMutation2[0];\n\n  return React.createElement(\"button\", {\n    onClick: async () => {\n      return await createList({\n        variables: {\n          recipeTitle,\n          recipeId: parseInt(recipeId, 10),\n          ingredients: ingredients.map(processInput),\n          userId\n        }\n      }).then(id => submitted(id)).catch(err => console.log(err));\n    },\n    className: \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, \"Create shopping list\");\n}\n\nexport default CreateShoppingList;","map":{"version":3,"sources":["/Users/dude/Documents/stuff/recipes/fe/src/components/shoppingList/create_shopping_list/CreateShoppingList.tsx"],"names":["React","useMutation","GET_MY_SHOPPING_LISTS","CREATE_SHOPPING_LIST","processInput","object","Object","fromEntries","entries","filter","key","CreateShoppingList","userId","recipeId","recipeTitle","ingredients","submitted","refetchQueries","query","variables","createList","parseInt","map","then","id","catch","err","console","log"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,qBAAT,QAAsC,+CAAtC;AACA,SAASC,oBAAT,QAAqC,8BAArC;;AAmBA,SAASC,YAAT,CAAyBC,MAAzB,EAAgD;AAC5C,SAAOC,MAAM,CAACC,WAAP,CAAmBD,MAAM,CAACE,OAAP,CAAeH,MAAf,EAAuBI,MAAvB,CAA8B,CAAC,CAACC,GAAD,CAAD,KAAWA,GAAG,KAAK,YAAjD,CAAnB,CAAP;AACH;;AAED,SAASC,kBAAT,CAA4B;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,QAAV;AAAoBC,EAAAA,WAApB;AAAiCC,EAAAA,WAAjC;AAA8CC,EAAAA;AAA9C,CAA5B,EAA6G;AAAA,uBAClFf,WAAW,CAACE,oBAAD,EAAuB;AACrDc,IAAAA,cAAc,EAAE,CAAC;AACbC,MAAAA,KAAK,EAAEhB,qBADM;AAEbiB,MAAAA,SAAS,EAAE;AAAEP,QAAAA,MAAM,EAAE;AAAV;AAFE,KAAD;AADqC,GAAvB,CADuE;AAAA;AAAA,QACjGQ,UADiG;;AAQzG,SACI;AACQ,IAAA,OAAO,EAAE,YAAW;AAChB,aAAO,MAAMA,UAAU,CAAC;AAACD,QAAAA,SAAS,EAAE;AAAEL,UAAAA,WAAF;AAAeD,UAAAA,QAAQ,EAAEQ,QAAQ,CAACR,QAAD,EAAW,EAAX,CAAjC;AAAiDE,UAAAA,WAAW,EAAEA,WAAW,CAACO,GAAZ,CAAgBlB,YAAhB,CAA9D;AAA6FQ,UAAAA;AAA7F;AAAZ,OAAD,CAAV,CACRW,IADQ,CACFC,EAAD,IAAQR,SAAS,CAACQ,EAAD,CADd,EAERC,KAFQ,CAEFC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAFL,CAAb;AAGH,KALT;AAMQ,IAAA,SAAS,EAAC,QANlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ;AAYH;;AAED,eAAef,kBAAf","sourcesContent":["import React from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { GET_MY_SHOPPING_LISTS } from '../my_shopping_lists/my-shopping-list.queries';\nimport { CREATE_SHOPPING_LIST } from './create_shopping_list.query';\n\ninterface NewShoppingListProps {\n    userId: string;\n    recipeId: string;\n    recipeTitle: string;\n    ingredients: ShoppingListIngredient[];\n    submitted: Function;\n}\n\ninterface ShoppingListIngredient {\n    id: number;\n    name: string;\n    original: string;\n    originalName: string;\n    amount: number;\n    unit: string;\n}\n\nfunction processInput<T>(object: T): Partial<T> {\n    return Object.fromEntries(Object.entries(object).filter(([key]) => key !== '__typename'));\n}\n\nfunction CreateShoppingList({ userId, recipeId, recipeTitle, ingredients, submitted }: NewShoppingListProps) {\n    const [ createList ] = useMutation(CREATE_SHOPPING_LIST, {\n        refetchQueries: [{\n            query: GET_MY_SHOPPING_LISTS,\n            variables: { userId: '5e03a6a91841d1fce86f9292' },\n        }]\n    });\n\n    return (\n        <button\n                onClick={async() => {\n                    return await createList({variables: { recipeTitle, recipeId: parseInt(recipeId, 10), ingredients: ingredients.map(processInput), userId }})\n                        .then((id) => submitted(id))\n                        .catch(err => console.log(err))\n                }}\n                className=\"button\"\n            >\n            Create shopping list\n        </button>\n    )\n}\n\nexport default CreateShoppingList"]},"metadata":{},"sourceType":"module"}