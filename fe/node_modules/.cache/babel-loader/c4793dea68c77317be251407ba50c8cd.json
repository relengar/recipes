{"ast":null,"code":"import{WebSocketLink}from'apollo-link-ws';import{split}from'apollo-link';import{HttpLink}from'apollo-link-http';import{getMainDefinition}from'apollo-utilities';var ssl=process.env.SSL_ENABLED?'s':'';var uri=process.env.API_URL_DOMAIN?\"http\".concat(ssl,\"://\").concat(process.env.API_URL_DOMAIN,\"/graphql\"):'http://localhost:3000/graphql';var wsUri=process.env.API_URL_DOMAIN?\"ws\".concat(ssl,\"://\").concat(process.env.API_URL_DOMAIN,\"/graphql\"):'ws://localhost:3000/graphql';var wsLink=new WebSocketLink({uri:wsUri,options:{reconnect:true}});var httpLink=new HttpLink({uri:uri,credentials:'include'});export var link=split(function(_ref){var query=_ref.query;var definition=getMainDefinition(query);return definition.kind==='OperationDefinition'&&definition.operation==='subscription';},wsLink,httpLink);","map":{"version":3,"sources":["/Users/dude/Documents/stuff/recipes/fe/src/websocketSetup.ts"],"names":["WebSocketLink","split","HttpLink","getMainDefinition","ssl","process","env","SSL_ENABLED","uri","API_URL_DOMAIN","wsUri","wsLink","options","reconnect","httpLink","credentials","link","query","definition","kind","operation"],"mappings":"AAAA,OAASA,aAAT,KAA8B,gBAA9B,CACA,OAASC,KAAT,KAAsB,aAAtB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,iBAAT,KAAkC,kBAAlC,CAEA,GAAMC,CAAAA,GAAG,CAAGC,OAAO,CAACC,GAAR,CAAYC,WAAZ,CAA0B,GAA1B,CAAgC,EAA5C,CACA,GAAMC,CAAAA,GAAG,CAAGH,OAAO,CAACC,GAAR,CAAYG,cAAZ,eAAoCL,GAApC,eAA6CC,OAAO,CAACC,GAAR,CAAYG,cAAzD,aAAoF,+BAAhG,CACA,GAAMC,CAAAA,KAAK,CAAGL,OAAO,CAACC,GAAR,CAAYG,cAAZ,aAAkCL,GAAlC,eAA2CC,OAAO,CAACC,GAAR,CAAYG,cAAvD,aAAkF,6BAAhG,CAGA,GAAME,CAAAA,MAAM,CAAG,GAAIX,CAAAA,aAAJ,CAAkB,CAC/BQ,GAAG,CAAEE,KAD0B,CAE/BE,OAAO,CAAE,CACPC,SAAS,CAAE,IADJ,CAFsB,CAAlB,CAAf,CAOA,GAAMC,CAAAA,QAAQ,CAAG,GAAIZ,CAAAA,QAAJ,CAAa,CAC5BM,GAAG,CAAHA,GAD4B,CAE5BO,WAAW,CAAE,SAFe,CAAb,CAAjB,CAKA,MAAO,IAAMC,CAAAA,IAAI,CAAGf,KAAK,CACrB,cAAe,IAAZgB,CAAAA,KAAY,MAAZA,KAAY,CACX,GAAMC,CAAAA,UAAU,CAAGf,iBAAiB,CAACc,KAAD,CAApC,CACA,MACEC,CAAAA,UAAU,CAACC,IAAX,GAAoB,qBAApB,EACAD,UAAU,CAACE,SAAX,GAAyB,cAF3B,CAIH,CAPoB,CAQrBT,MARqB,CASrBG,QATqB,CAAlB","sourcesContent":["import { WebSocketLink } from 'apollo-link-ws';\nimport { split } from 'apollo-link';\nimport { HttpLink } from 'apollo-link-http';\nimport { getMainDefinition } from 'apollo-utilities';\n\nconst ssl = process.env.SSL_ENABLED ? 's' : '';\nconst uri = process.env.API_URL_DOMAIN ? `http${ssl}://${process.env.API_URL_DOMAIN}/graphql` : 'http://localhost:3000/graphql';\nconst wsUri = process.env.API_URL_DOMAIN ? `ws${ssl}://${process.env.API_URL_DOMAIN}/graphql` : 'ws://localhost:3000/graphql';\n\n\nconst wsLink = new WebSocketLink({\n  uri: wsUri,\n  options: {\n    reconnect: true\n  }\n});\n\nconst httpLink = new HttpLink({\n  uri,\n  credentials: 'include',\n});\n\nexport const link = split(\n    ({ query }) => {\n        const definition = getMainDefinition(query);\n        return (\n          definition.kind === 'OperationDefinition' &&\n          definition.operation === 'subscription'\n        );\n    },\n    wsLink,\n    httpLink,\n);"]},"metadata":{},"sourceType":"module"}